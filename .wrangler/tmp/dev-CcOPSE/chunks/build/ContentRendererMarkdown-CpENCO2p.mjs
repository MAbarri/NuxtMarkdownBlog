import{au as e,a2 as t,bk as n,bl as o,bm as r,bn as a,bo as u}from"../runtime.mjs";import{f as l}from"./node-04k6j4dz.mjs";import{u as s}from"./preview-wkaBPEZ5.mjs";import{u as d,d as i,f as c,t as p,A as m,g as f,h as v,H as b,P as y,Q as g}from"../routes/renderer.mjs";import"./server.mjs";const h=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"],j="default",_=/^@|^v-on:/,x=/^:|^v-bind:/,S=/^v-model/,k=["select","textarea","input"],w=Object.fromEntries(["p","a","blockquote","code","pre","code","em","h1","h2","h3","h4","h5","h6","hr","img","ul","ol","li","strong","table","thead","tbody","td","th","tr","script"].map((e=>[e,`prose-${e}`]))),C=i({name:"MDCRenderer",props:{body:{type:Object,required:!0},data:{type:Object,default:()=>({})},class:{type:[String,Object],default:void 0},tag:{type:[String,Boolean],default:void 0},prose:{type:Boolean,default:void 0},components:{type:Object,default:()=>({})},unwrap:{type:[Boolean,String],default:!1}},async setup(e){var n,o,r,a,u,l,s,d;const i=null==(r=null==(o=null==(n=f())?void 0:n.appContext)?void 0:o.app)?void 0:r.$nuxt,p=(null==i?void 0:i.$route)||(null==i?void 0:i._route),{mdc:m}=(null==(a=null==i?void 0:i.$config)?void 0:a.public)||{},v={...(null==(u=null==m?void 0:m.components)?void 0:u.prose)&&!1!==e.prose?w:{},...(null==(l=null==m?void 0:m.components)?void 0:l.map)||{},...t((null==(d=null==(s=e.data)?void 0:s.mdc)?void 0:d.components)||{}),...e.components},b=c((()=>{var t;const n=((null==(t=e.body)?void 0:t.children)||[]).map((e=>e.tag||e.type)).filter((e=>!h.includes(e)));return Array.from(new Set(n)).sort().join(".")}));return await async function(e,t){if(!e)return;const n=Array.from(new Set(loadComponents(e,t)));function loadComponents(e,t){const n=e.tag;if("text"===e.type||"binding"===n||"comment"===e.type)return[];const o=findMappedTag(e,t.tags),r=[];"root"===e.type||h.includes(o)||r.push(o);for(const n of e.children||[])r.push(...loadComponents(n,t));return r}await Promise.all(n.map((async e=>{if((null==e?void 0:e.render)||(null==e?void 0:e.ssrRender)||(null==e?void 0:e.__ssrInlineRender))return;const t=resolveVueComponent(e);(null==t?void 0:t.__asyncLoader)&&!t.__asyncResolved&&await t.__asyncLoader()})))}(e.body,{tags:v}),{tags:v,contentKey:b,route:p}},render(e){var t,n;const{tags:o,tag:r,body:a,data:u,contentKey:s,route:d,unwrap:i}=e;if(!a)return null;const c={...u,tags:o,$route:d},p=!1!==r?resolveVueComponent(r||(null==(t=c.component)?void 0:t.name)||c.component||"div"):void 0;return p?v(p,{...null==(n=c.component)?void 0:n.props,class:e.class,...this.$attrs,key:s},{default:defaultSlotRenderer}):null==defaultSlotRenderer?void 0:defaultSlotRenderer();function defaultSlotRenderer(){return i?l(renderSlots(a,v,c,c).default(),"string"==typeof i?i.split(" "):["*"]):renderSlots(a,v,c,c).default()}}});function renderNode(e,t,n,o={}){if("text"===e.type)return t(y,e.value);if("comment"===e.type)return t(g,null,e.value);const u=e.tag,l=findMappedTag(e,n.tags);if("binding"===e.tag)return function(e,t,n,o={}){var r,a,u;const l={...o,$document:n,$doc:n},s=/\.|\[(\d+)\]/,d=null==(a=e.props)?void 0:a.value.trim().split(s).filter(Boolean),i=d.reduce(((e,t)=>{if(e&&t in e)return"function"==typeof e[t]?e[t]():e[t]}),l),c=null==(u=e.props)?void 0:u.defaultValue;return t(y,null!=(r=null!=i?i:c)?r:"")}(e,t,n,o);const s=resolveVueComponent(l);"object"==typeof s&&(s.tag=u);const d=function(e,t){const{tag:n="",props:o={}}=e;return Object.keys(o).reduce((function(e,u){if("__ignoreMap"===u)return e;const l=o[u];if(S.test(u)&&!k.includes(n))return function(e,t,n,o){const number=e=>+e,trim=e=>e.trim(),noop=e=>e,r=e.replace(S,"").split(".").filter((e=>e)).reduce(((e,t)=>(e[t]=!0,e)),{}),a="value",u=r.lazy?"change":"input",l=r.number?number:r.trim?trim:noop;return n[a]=evalInContext(t,o),n.on=n.on||{},n.on[u]=e=>o[t]=l(e),n}(u,l,e,t);if("v-bind"===u)return function(e,t,n,o){const r=evalInContext(t,o);return n=Object.assign(n,r),n}(0,l,e,t);if(_.test(u))return function(e,t,n,o){return e=e.replace(_,""),n.on=n.on||{},n.on[e]=()=>evalInContext(t,o),n}(u,l,e,t);if(x.test(u))return function(e,t,n,o){return e=e.replace(x,""),n[e]=evalInContext(t,o),n}(u,l,e,t);const{attribute:s}=r(a,u);return Array.isArray(l)&&l.every((e=>"string"==typeof e))?(e[s]=l.join(" "),e):(e[s]=l,e)}),{})}(e,n);return t(s,d,renderSlots(e,t,n,{...o,...d}))}function renderSlots(e,t,n,o){const r=(e.children||[]).reduce(((e,t)=>{if(!function(e){return"template"===e.tag}(t))return e[j].push(t),e;const n=function(e){let t="";for(const n of Object.keys(e.props||{}))if(n.startsWith("#")||n.startsWith("v-slot:")){t=n.split(/[:#]/,2)[1];break}return t||j}(t);return e[n]=e[n]||[],"element"===t.type&&e[n].push(...t.children||[]),e}),{[j]:[]}),a=Object.entries(r).reduce(((e,[r,a])=>a.length?(e[r]=()=>function(e){const t=[];for(const n of e){const e=t[t.length-1];n.type===y&&(null==e?void 0:e.type)===y?e.children=e.children+n.children:t.push(n)}return t}(a.map((e=>renderNode(e,t,n,o)))),e):e),{});return a}const resolveVueComponent=e=>{if(!h.includes(e)&&!(null==e?void 0:e.render)&&!(null==e?void 0:e.ssrRender)){const t=b(n(e),!1);if("object"==typeof t)return t}return e};function evalInContext(e,t){const n=e.split(".").reduce(((e,t)=>"object"==typeof e?e[t]:void 0),t);return void 0===n?u(e):n}function findMappedTag(e,t){var r;const a=e.tag;return a&&void 0===(null==(r=e.props)?void 0:r.__ignoreMap)&&(t[a]||t[n(a)]||t[o(e.tag)])||a}const R=C.setup;C.setup=(e,t)=>{const n=d();return(n.modules||(n.modules=new Set)).add("node_modules/@nuxtjs/mdc/dist/runtime/components/MDCRenderer.vue"),R?R(e,t):void 0};const O=i({__name:"ContentRendererMarkdown",__ssrInlineRender:!0,props:{value:{type:Object,required:!0},excerpt:{type:Boolean,default:!1},tag:{type:String,default:"div"},components:{type:Object,default:()=>({})},data:{type:Object,default:()=>({})}},setup(t){const n=t,o=s().isEnabled(),r=c((()=>{let e=n.value.body||n.value;return n.excerpt&&n.value.excerpt&&(e=n.value.excerpt),e})),a=c((()=>{const{body:e,excerpt:t,...o}=n.value;return{...o,...n.data}})),u=c((()=>({...n.components,...a.value._components||{}})));return(n,l,s,d)=>{l(p(C,m({body:r.value,data:a.value,tag:t.tag,components:u.value,"data-content-id":e(o)?t.value._id:void 0},d),null,s))}}}),M=O.setup;O.setup=(e,t)=>{const n=d();return(n.modules||(n.modules=new Set)).add("node_modules/@nuxt/content/dist/runtime/components/ContentRendererMarkdown.vue"),M?M(e,t):void 0};export{O as default};
//# sourceMappingURL=ContentRendererMarkdown-CpENCO2p.mjs.map
