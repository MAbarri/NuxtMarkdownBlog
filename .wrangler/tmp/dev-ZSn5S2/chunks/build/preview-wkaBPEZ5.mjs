import{bf as e,a3 as o,bp as i,bq as r,bo as n,br as s,bs as t,bt as a,bu as u}from"../runtime.mjs";import{i as c,e as l,j as p}from"./server.mjs";const v={path:"/",watch:!0,decode:e=>n(decodeURIComponent(e)),encode:e=>encodeURIComponent("string"==typeof e?e:JSON.stringify(e))};function useCookie(n,c){var k,d;const f={...v,...c};null!=f.filter||(f.filter=e=>e===n);const m=function(e={}){return i(r(p(),"cookie")||"",e)}(f)||{};let w;void 0!==f.maxAge?w=1e3*f.maxAge:f.expires&&(w=f.expires.getTime()-Date.now());const b=e(void 0!==w&&w<=0?void 0:null!=(k=m[n])?k:null==(d=f.default)?void 0:d.call(f)),h=o(b);{const e=l(),writeFinalCookieValue=()=>{f.readonly||s(h.value,m[n])||(e._cookies||(e._cookies={}),n in e._cookies&&s(h.value,e._cookies[n])||(e._cookies[n]=h.value,function(e,o,i,r={}){if(e){if(null!=i)return t(e,o,i,r);if(void 0!==a(e,o))u(e,o,r)}}(p(e),n,h.value,f)))},o=e.hooks.hookOnce("app:rendered",writeFinalCookieValue);e.hooks.hookOnce("app:error",(()=>(o(),writeFinalCookieValue())))}return h}const useContentPreview=()=>({isEnabled:()=>{const e=c().query;return!(Object.prototype.hasOwnProperty.call(e,"preview")&&!e.preview)&&!(!e.preview&&!useCookie("previewToken").value)},getPreviewToken:()=>useCookie("previewToken").value||void 0,setPreviewToken:e=>{useCookie("previewToken").value=e,c().query.preview=e||""}});export{useContentPreview as u};
//# sourceMappingURL=preview-wkaBPEZ5.mjs.map
