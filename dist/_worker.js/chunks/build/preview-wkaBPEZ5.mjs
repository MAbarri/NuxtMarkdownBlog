import{bg as e,a5 as o,bo as i,bp as n,bn as r,bq as s,br as t,bs as a,bt as u}from"../runtime.mjs";import{i as c,e as l,j as p}from"./server.mjs";const v={path:"/",watch:!0,decode:e=>r(decodeURIComponent(e)),encode:e=>encodeURIComponent("string"==typeof e?e:JSON.stringify(e))};function useCookie(r,c){var k,d;const f={...v,...c};null!=f.filter||(f.filter=e=>e===r);const m=function(e={}){return i(n(p(),"cookie")||"",e)}(f)||{};let w;void 0!==f.maxAge?w=1e3*f.maxAge:f.expires&&(w=f.expires.getTime()-Date.now());const b=e(void 0!==w&&w<=0?void 0:null!=(k=m[r])?k:null==(d=f.default)?void 0:d.call(f)),g=o(b);{const e=l(),writeFinalCookieValue=()=>{f.readonly||s(g.value,m[r])||(e._cookies||(e._cookies={}),r in e._cookies&&s(g.value,e._cookies[r])||(e._cookies[r]=g.value,function(e,o,i,n={}){if(e){if(null!=i)return t(e,o,i,n);if(void 0!==a(e,o))u(e,o,n)}}(p(e),r,g.value,f)))},o=e.hooks.hookOnce("app:rendered",writeFinalCookieValue);e.hooks.hookOnce("app:error",(()=>(o(),writeFinalCookieValue())))}return g}const useContentPreview=()=>({isEnabled:()=>{const e=c().query;return!(Object.prototype.hasOwnProperty.call(e,"preview")&&!e.preview)&&!(!e.preview&&!useCookie("previewToken").value)},getPreviewToken:()=>useCookie("previewToken").value||void 0,setPreviewToken:e=>{useCookie("previewToken").value=e,c().query.preview=e||""}});export{useContentPreview as u};
//# sourceMappingURL=preview-wkaBPEZ5.mjs.map
